#!/usr/bin/env python3

import psycopg2

db_name = '<%= scope['odoo::db_name'] %>'
db_user = '<%= scope['odoo::db_user'] %>'
db_host = '<%= scope['odoo::db_host'] %>'
db_password = '<%= scope['odoo::db_password'] %>'

conn_string = "dbname={0} user={1} host={2} password={3}".format(db_name, db_user, db_host, db_password)

query = """select * from res_partner"""

try:
    con = psycopg2.connect(conn_string)
except:
    exit(1)
try:
    cur = con.cursor()
    cur.execute(query)
except:
    exit(1)

exit(0)
